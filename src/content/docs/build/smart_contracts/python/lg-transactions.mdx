---
title: "Transactions"
---
import { Code } from '@astrojs/starlight/components';

<Fragment set:html={`
          <section id="transactions">
<h1>Transactions<a class="headerlink" href="#transactions" title="Link to this heading">Â¶</a></h1>
<p>Algorand Python provides types for accessing fields of other transactions in a group, as well as
creating and submitting inner transactions from your smart contract.</p>
<p>The following types are available:</p>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Group Transactions</p></th>
<th class="head"><p>Inner Transaction Field sets</p></th>
<th class="head"><p>Inner Transaction</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="../api-algopy.gtxn.html#algopy.gtxn.PaymentTransaction" title="algopy.gtxn.PaymentTransaction"><span class="xref myst py py-class">PaymentTransaction</span></a></p></td>
<td><p><a class="reference internal" href="../api-algopy.itxn.html#algopy.itxn.Payment" title="algopy.itxn.Payment"><span class="xref myst py py-class">Payment</span></a></p></td>
<td><p><a class="reference internal" href="../api-algopy.itxn.html#algopy.itxn.PaymentInnerTransaction" title="algopy.itxn.PaymentInnerTransaction"><span class="xref myst py py-class">PaymentInnerTransaction</span></a></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../api-algopy.gtxn.html#algopy.gtxn.KeyRegistrationTransaction" title="algopy.gtxn.KeyRegistrationTransaction"><span class="xref myst py py-class">KeyRegistrationTransaction</span></a></p></td>
<td><p><a class="reference internal" href="../api-algopy.itxn.html#algopy.itxn.KeyRegistration" title="algopy.itxn.KeyRegistration"><span class="xref myst py py-class">KeyRegistration</span></a></p></td>
<td><p><a class="reference internal" href="../api-algopy.itxn.html#algopy.itxn.KeyRegistrationInnerTransaction" title="algopy.itxn.KeyRegistrationInnerTransaction"><span class="xref myst py py-class">KeyRegistrationInnerTransaction</span></a></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../api-algopy.gtxn.html#algopy.gtxn.AssetConfigTransaction" title="algopy.gtxn.AssetConfigTransaction"><span class="xref myst py py-class">AssetConfigTransaction</span></a></p></td>
<td><p><a class="reference internal" href="../api-algopy.itxn.html#algopy.itxn.AssetConfig" title="algopy.itxn.AssetConfig"><span class="xref myst py py-class">AssetConfig</span></a></p></td>
<td><p><a class="reference internal" href="../api-algopy.itxn.html#algopy.itxn.AssetConfigInnerTransaction" title="algopy.itxn.AssetConfigInnerTransaction"><span class="xref myst py py-class">AssetConfigInnerTransaction</span></a></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../api-algopy.gtxn.html#algopy.gtxn.AssetTransferTransaction" title="algopy.gtxn.AssetTransferTransaction"><span class="xref myst py py-class">AssetTransferTransaction</span></a></p></td>
<td><p><a class="reference internal" href="../api-algopy.itxn.html#algopy.itxn.AssetTransfer" title="algopy.itxn.AssetTransfer"><span class="xref myst py py-class">AssetTransfer</span></a></p></td>
<td><p><a class="reference internal" href="../api-algopy.itxn.html#algopy.itxn.AssetTransferInnerTransaction" title="algopy.itxn.AssetTransferInnerTransaction"><span class="xref myst py py-class">AssetTransferInnerTransaction</span></a></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../api-algopy.gtxn.html#algopy.gtxn.AssetFreezeTransaction" title="algopy.gtxn.AssetFreezeTransaction"><span class="xref myst py py-class">AssetFreezeTransaction</span></a></p></td>
<td><p><a class="reference internal" href="../api-algopy.itxn.html#algopy.itxn.AssetFreeze" title="algopy.itxn.AssetFreeze"><span class="xref myst py py-class">AssetFreeze</span></a></p></td>
<td><p><a class="reference internal" href="../api-algopy.itxn.html#algopy.itxn.AssetFreezeInnerTransaction" title="algopy.itxn.AssetFreezeInnerTransaction"><span class="xref myst py py-class">AssetFreezeInnerTransaction</span></a></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../api-algopy.gtxn.html#algopy.gtxn.ApplicationCallTransaction" title="algopy.gtxn.ApplicationCallTransaction"><span class="xref myst py py-class">ApplicationCallTransaction</span></a></p></td>
<td><p><a class="reference internal" href="../api-algopy.itxn.html#algopy.itxn.ApplicationCall" title="algopy.itxn.ApplicationCall"><span class="xref myst py py-class">ApplicationCall</span></a></p></td>
<td><p><a class="reference internal" href="../api-algopy.itxn.html#algopy.itxn.ApplicationCallInnerTransaction" title="algopy.itxn.ApplicationCallInnerTransaction"><span class="xref myst py py-class">ApplicationCallInnerTransaction</span></a></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../api-algopy.gtxn.html#algopy.gtxn.Transaction" title="algopy.gtxn.Transaction"><span class="xref myst py py-class">Transaction</span></a></p></td>
<td><p><a class="reference internal" href="../api-algopy.itxn.html#algopy.itxn.InnerTransaction" title="algopy.itxn.InnerTransaction"><span class="xref myst py py-class">InnerTransaction</span></a></p></td>
<td><p><a class="reference internal" href="../api-algopy.itxn.html#algopy.itxn.InnerTransactionResult" title="algopy.itxn.InnerTransactionResult"><span class="xref myst py py-class">InnerTransactionResult</span></a></p></td>
</tr>
</tbody>
</table>
</div>
<section id="group-transactions">
`} />
## Group Transactions

<Fragment set:html={`
<p>Group transactions can be used as ARC4 parameters or instantiated from a group index.</p>
<section id="arc4-parameter">
`} />
### ARC4 parameter

<Fragment set:html={`
<p>Group transactions can be used as parameters in ARC4 method</p>
<p>For example to require a payment transaction in an ARC4 ABI method:</p>
`} /><Code code={`<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">algopy</span>


<span class="k">class</span> <span class="nc">MyContract</span><span class="p">(</span><span class="n">algopy</span><span class="o">.</span><span class="n">ARC4Contract</span><span class="p">):</span>

    <span class="nd">@algopy</span><span class="o">.</span><span class="n">arc4</span><span class="o">.</span><span class="n">abimethod</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">process_payment</span><span class="p">(</span><span class="bp">self</span><span class="p">:</span> <span class="n">algopy</span><span class="o">.</span><span class="n">gtxn</span><span class="o">.</span><span class="n">PaymentTransaction</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="o">...</span>
</pre></div>
</div>`} lang='py' frame='none' /><Fragment set:html={`
</section>
<section id="group-index">
`} />
### Group Index

<Fragment set:html={`
<p>Group transactions can also be created using the group index of the transaction.
If instantiating one of the type specific transactions they will be checked to ensure the transaction is of the expected type.
<a class="reference internal" href="../api-algopy.gtxn.html#algopy.gtxn.Transaction" title="algopy.gtxn.Transaction"><span class="xref myst py py-class">Transaction</span></a> is not checked for a specific type and provides access to all transaction fields</p>
<p>For example, to obtain a reference to a payment transaction:</p>
`} /><Code code={`<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">algopy</span>


<span class="nd">@algopy</span><span class="o">.</span><span class="n">subroutine</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">process_payment</span><span class="p">(</span><span class="n">group_index</span><span class="p">:</span> <span class="n">algopy</span><span class="o">.</span><span class="n">UInt64</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">pay_txn</span> <span class="o">=</span> <span class="n">algopy</span><span class="o">.</span><span class="n">gtxn</span><span class="o">.</span><span class="n">PaymentTransaction</span><span class="p">(</span><span class="n">group_index</span><span class="p">)</span>
    <span class="o">...</span>
</pre></div>
</div>`} lang='py' frame='none' /><Fragment set:html={`
</section>
</section>
<section id="inner-transactions">
`} />
## Inner Transactions

<Fragment set:html={`
<p>Inner transactions are defined using the parameter types, and can then be submitted individually by calling the
<code class="docutils literal notranslate"><span class="pre">.submit()</span></code> method, or as a group by calling <a class="reference internal" href="../api-algopy.itxn.html#algopy.itxn.submit_txns" title="algopy.itxn.submit_txns"><span class="xref myst py py-func"><code class="docutils literal notranslate"><span class="pre">submit_txns</span></code></span></a></p>
<section id="examples">
`} />
### Examples

<Fragment set:html={`
<section id="create-and-submit-an-inner-transaction">
`} />
#### Create and submit an inner transaction

<Fragment set:html={`
`} /><Code code={`<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">algopy</span> <span class="kn">import</span> <span class="n">Account</span><span class="p">,</span> <span class="n">UInt64</span><span class="p">,</span> <span class="n">itxn</span><span class="p">,</span> <span class="n">subroutine</span>


<span class="nd">@subroutine</span>
<span class="k">def</span> <span class="nf">example</span><span class="p">(</span><span class="n">amount</span><span class="p">:</span> <span class="n">UInt64</span><span class="p">,</span> <span class="n">receiver</span><span class="p">:</span> <span class="n">Account</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">itxn</span><span class="o">.</span><span class="n">Payment</span><span class="p">(</span>
        <span class="n">amount</span><span class="o">=</span><span class="n">amount</span><span class="p">,</span>
        <span class="n">receiver</span><span class="o">=</span><span class="n">receiver</span><span class="p">,</span>
        <span class="n">fee</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="p">)</span><span class="o">.</span><span class="n">submit</span><span class="p">()</span>
</pre></div>
</div>`} lang='py' frame='none' /><Fragment set:html={`
</section>
<section id="accessing-result-of-a-submitted-inner-transaction">
`} />
#### Accessing result of a submitted inner transaction

<Fragment set:html={`
`} /><Code code={`<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">algopy</span> <span class="kn">import</span> <span class="n">Asset</span><span class="p">,</span> <span class="n">itxn</span><span class="p">,</span> <span class="n">subroutine</span>


<span class="nd">@subroutine</span>
<span class="k">def</span> <span class="nf">example</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Asset</span><span class="p">:</span>
    <span class="n">asset_txn</span> <span class="o">=</span> <span class="n">itxn</span><span class="o">.</span><span class="n">AssetConfig</span><span class="p">(</span>
        <span class="n">asset_name</span><span class="o">=</span><span class="sa">b</span><span class="s2">"Puya"</span><span class="p">,</span>
        <span class="n">unit_name</span><span class="o">=</span><span class="sa">b</span><span class="s2">"PYA"</span><span class="p">,</span>
        <span class="n">total</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
        <span class="n">decimals</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
        <span class="n">fee</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="p">)</span><span class="o">.</span><span class="n">submit</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">asset_txn</span><span class="o">.</span><span class="n">created_asset</span>
</pre></div>
</div>`} lang='py' frame='none' /><Fragment set:html={`
</section>
<section id="submitting-multiple-transactions">
`} />
#### Submitting multiple transactions

<Fragment set:html={`
`} /><Code code={`<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">algopy</span> <span class="kn">import</span> <span class="n">Asset</span><span class="p">,</span> <span class="n">Bytes</span><span class="p">,</span> <span class="n">itxn</span><span class="p">,</span> <span class="n">log</span><span class="p">,</span> <span class="n">subroutine</span>


<span class="nd">@subroutine</span>
<span class="k">def</span> <span class="nf">example</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">Asset</span><span class="p">,</span> <span class="n">Bytes</span><span class="p">]:</span>
    <span class="n">asset1_params</span> <span class="o">=</span> <span class="n">itxn</span><span class="o">.</span><span class="n">AssetConfig</span><span class="p">(</span>
        <span class="n">asset_name</span><span class="o">=</span><span class="sa">b</span><span class="s2">"Puya"</span><span class="p">,</span>
        <span class="n">unit_name</span><span class="o">=</span><span class="sa">b</span><span class="s2">"PYA"</span><span class="p">,</span>
        <span class="n">total</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
        <span class="n">decimals</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
        <span class="n">fee</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">app_params</span> <span class="o">=</span> <span class="n">itxn</span><span class="o">.</span><span class="n">ApplicationCall</span><span class="p">(</span>
        <span class="n">app_id</span><span class="o">=</span><span class="mi">1234</span><span class="p">,</span>
        <span class="n">app_args</span><span class="o">=</span><span class="p">(</span><span class="n">Bytes</span><span class="p">(</span><span class="sa">b</span><span class="s2">"arg1"</span><span class="p">),</span> <span class="n">Bytes</span><span class="p">(</span><span class="sa">b</span><span class="s2">"arg1"</span><span class="p">))</span>
    <span class="p">)</span>
    <span class="n">asset1_txn</span><span class="p">,</span> <span class="n">app_txn</span> <span class="o">=</span> <span class="n">itxn</span><span class="o">.</span><span class="n">submit_txns</span><span class="p">(</span><span class="n">asset1_params</span><span class="p">,</span> <span class="n">app_params</span><span class="p">)</span>
    <span class="c1"># log some details</span>
    <span class="n">log</span><span class="p">(</span><span class="n">app_txn</span><span class="o">.</span><span class="n">logs</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
    <span class="n">log</span><span class="p">(</span><span class="n">asset1_txn</span><span class="o">.</span><span class="n">txn_id</span><span class="p">)</span>
    <span class="n">log</span><span class="p">(</span><span class="n">app_txn</span><span class="o">.</span><span class="n">txn_id</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">asset1_txn</span><span class="o">.</span><span class="n">created_asset</span><span class="p">,</span> <span class="n">app_txn</span><span class="o">.</span><span class="n">logs</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>`} lang='py' frame='none' /><Fragment set:html={`
</section>
<section id="create-an-arc4-application-and-then-call-it">
`} />
#### Create an ARC4 application, and then call it

<Fragment set:html={`
`} /><Code code={`<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">algopy</span> <span class="kn">import</span> <span class="n">Bytes</span><span class="p">,</span> <span class="n">arc4</span><span class="p">,</span> <span class="n">itxn</span><span class="p">,</span> <span class="n">subroutine</span>

<span class="n">HELLO_WORLD_APPROVAL</span><span class="p">:</span> <span class="nb">bytes</span> <span class="o">=</span> <span class="o">...</span>
<span class="n">HELLO_WORLD_CLEAR</span><span class="p">:</span> <span class="nb">bytes</span> <span class="o">=</span> <span class="o">...</span>


<span class="nd">@subroutine</span>
<span class="k">def</span> <span class="nf">example</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="c1"># create an application</span>
    <span class="n">application_txn</span> <span class="o">=</span> <span class="n">itxn</span><span class="o">.</span><span class="n">ApplicationCall</span><span class="p">(</span>
        <span class="n">approval_program</span><span class="o">=</span><span class="n">HELLO_WORLD_APPROVAL</span><span class="p">,</span>
        <span class="n">clear_state_program</span><span class="o">=</span><span class="n">HELLO_WORLD_CLEAR</span><span class="p">,</span>
        <span class="n">fee</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="p">)</span><span class="o">.</span><span class="n">submit</span><span class="p">()</span>
    <span class="n">app</span> <span class="o">=</span> <span class="n">application_txn</span><span class="o">.</span><span class="n">created_app</span>

    <span class="c1"># invoke an ABI method</span>
    <span class="n">call_txn</span> <span class="o">=</span> <span class="n">itxn</span><span class="o">.</span><span class="n">ApplicationCall</span><span class="p">(</span>
        <span class="n">app_id</span><span class="o">=</span><span class="n">app</span><span class="p">,</span>
        <span class="n">app_args</span><span class="o">=</span><span class="p">(</span><span class="n">arc4</span><span class="o">.</span><span class="n">arc4_signature</span><span class="p">(</span><span class="s2">"hello(string)string"</span><span class="p">),</span> <span class="n">arc4</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="s2">"World"</span><span class="p">)),</span>
        <span class="n">fee</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="p">)</span><span class="o">.</span><span class="n">submit</span><span class="p">()</span>
    <span class="c1"># extract result</span>
    <span class="n">hello_world_result</span> <span class="o">=</span> <span class="n">arc4</span><span class="o">.</span><span class="n">String</span><span class="o">.</span><span class="n">from_log</span><span class="p">(</span><span class="n">call_txn</span><span class="o">.</span><span class="n">last_log</span><span class="p">)</span>
    
    <span class="c1"># OR, call it automatic ARC4 encoding, type validation and result handling</span>
    <span class="n">hello_world_result</span><span class="p">,</span> <span class="n">call_txn</span> <span class="o">=</span> <span class="n">arc4</span><span class="o">.</span><span class="n">abi_call</span><span class="p">[</span><span class="n">arc4</span><span class="o">.</span><span class="n">String</span><span class="p">](</span> <span class="c1"># declare return type</span>
        <span class="s2">"hello(string)string"</span><span class="p">,</span> <span class="c1"># method signature to call </span>
        <span class="s2">"again"</span><span class="p">,</span> <span class="c1"># abi method arguments</span>
        <span class="n">fee</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="c1"># other transaction parameters</span>
        <span class="n">app_id</span><span class="o">=</span><span class="n">app</span>
    <span class="p">)</span>
</pre></div>
</div>`} lang='py' frame='none' /><Fragment set:html={`
</section>
<section id="create-and-submit-transactions-in-a-loop">
`} />
#### Create and submit transactions in a loop

<Fragment set:html={`
`} /><Code code={`<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">algopy</span> <span class="kn">import</span> <span class="n">Account</span><span class="p">,</span> <span class="n">UInt64</span><span class="p">,</span> <span class="n">itxn</span><span class="p">,</span> <span class="n">subroutine</span>


<span class="nd">@subroutine</span>
<span class="k">def</span> <span class="nf">example</span><span class="p">(</span><span class="n">receivers</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">Account</span><span class="p">,</span> <span class="n">Account</span><span class="p">,</span> <span class="n">Account</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">receiver</span> <span class="ow">in</span> <span class="n">receivers</span><span class="p">:</span>
        <span class="n">itxn</span><span class="o">.</span><span class="n">Payment</span><span class="p">(</span>
            <span class="n">amount</span><span class="o">=</span><span class="n">UInt64</span><span class="p">(</span><span class="mi">1_000_000</span><span class="p">),</span>
            <span class="n">receiver</span><span class="o">=</span><span class="n">receiver</span><span class="p">,</span>
            <span class="n">fee</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="p">)</span><span class="o">.</span><span class="n">submit</span><span class="p">()</span>
</pre></div>
</div>`} lang='py' frame='none' /><Fragment set:html={`
</section>
</section>
<section id="arc4-application-calls">
`} />
### ARC4 Application calls

<Fragment set:html={`
<section id="algopy-arc4-abi-call">
`} />
#### algopy.arc4.abi_call

<Fragment set:html={`
<p><a class="reference internal" href="../api-algopy.arc4.html#algopy.arc4.abi_call" title="algopy.arc4.abi_call"><span class="xref myst py py-data"><code class="docutils literal notranslate"><span class="pre">algopy.arc4.abi_call</span></code></span></a> can be used to call other ARC4 contracts, the first argument should refer to
an ARC4 method either by referencing an Algorand Python <a class="reference internal" href="../api-algopy.arc4.html#algopy.arc4.ARC4Contract" title="algopy.arc4.ARC4Contract"><span class="xref myst py py-class"><code class="docutils literal notranslate"><span class="pre">algopy.arc4.ARC4Contract</span></code></span></a> method,
an <a class="reference internal" href="../api-algopy.arc4.html#algopy.arc4.ARC4Client" title="algopy.arc4.ARC4Client"><span class="xref myst py py-class"><code class="docutils literal notranslate"><span class="pre">algopy.arc4.ARC4Client</span></code></span></a> method generated from an ARC-32 app spec, or a string representing
the ARC4 method signature or name.
The following arguments should then be the arguments required for the call, these arguments will be type checked and converted where appropriate.
Any other related transaction parameters such as <code class="docutils literal notranslate"><span class="pre">app_id</span></code>, <code class="docutils literal notranslate"><span class="pre">fee</span></code> etc. can also be provided as keyword arguments.</p>
<p>If the ARC4 method returns an ARC4 result then the result will be a tuple of the ARC4 result and the inner transaction.
If the ARC4 method does not return a result, or if the result type is not fully qualified then just the inner transaction is returned.</p>
`} /><Code code={`<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">algopy</span> <span class="kn">import</span> <span class="n">Application</span><span class="p">,</span> <span class="n">ARC4Contract</span><span class="p">,</span> <span class="n">String</span><span class="p">,</span> <span class="n">arc4</span><span class="p">,</span> <span class="n">subroutine</span>

<span class="k">class</span> <span class="nc">HelloWorld</span><span class="p">(</span><span class="n">ARC4Contract</span><span class="p">):</span>
    
    <span class="nd">@arc4</span><span class="o">.</span><span class="n">abimethod</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">greet</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="n">String</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">String</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">"Hello "</span> <span class="o">+</span> <span class="n">name</span>

<span class="nd">@subroutine</span>
<span class="k">def</span> <span class="nf">call_existing_application</span><span class="p">(</span><span class="n">app</span><span class="p">:</span> <span class="n">Application</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">greeting</span><span class="p">,</span> <span class="n">greet_txn</span> <span class="o">=</span> <span class="n">arc4</span><span class="o">.</span><span class="n">abi_call</span><span class="p">(</span><span class="n">HelloWorld</span><span class="o">.</span><span class="n">greet</span><span class="p">,</span> <span class="s2">"there"</span><span class="p">,</span> <span class="n">app_id</span><span class="o">=</span><span class="n">app</span><span class="p">)</span>
    
    <span class="k">assert</span> <span class="n">greeting</span> <span class="o">==</span> <span class="s2">"Hello there"</span>
    <span class="k">assert</span> <span class="n">greet_txn</span><span class="o">.</span><span class="n">app_id</span> <span class="o">==</span> <span class="mi">1234</span>
</pre></div>
</div>`} lang='py' frame='none' /><Fragment set:html={`
</section>
</section>
<section id="limitations">
`} />
### Limitations

<Fragment set:html={`
<p>Inner transactions are powerful, but currently do have some restrictions in how they are used.</p>
<section id="inner-transaction-objects-cannot-be-passed-to-or-returned-from-subroutines">
`} />
#### Inner transaction objects cannot be passed to or returned from subroutines

<Fragment set:html={`
`} /><Code code={`<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">algopy</span> <span class="kn">import</span> <span class="n">Application</span><span class="p">,</span> <span class="n">Bytes</span><span class="p">,</span> <span class="n">itxn</span><span class="p">,</span> <span class="n">subroutine</span>


<span class="nd">@subroutine</span>
<span class="k">def</span> <span class="nf">parameter_not_allowed</span><span class="p">(</span><span class="n">txn</span><span class="p">:</span> <span class="n">itxn</span><span class="o">.</span><span class="n">PaymentInnerTransaction</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="c1"># this is a compile error</span>
    <span class="o">...</span>


<span class="nd">@subroutine</span>
<span class="k">def</span> <span class="nf">return_not_allowed</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">itxn</span><span class="o">.</span><span class="n">PaymentInnerTransaction</span><span class="p">:</span>
    <span class="c1"># this is a compile error</span>
    <span class="o">...</span>


<span class="nd">@subroutine</span>
<span class="k">def</span> <span class="nf">passing_fields_allowed</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Application</span><span class="p">:</span>
    <span class="n">txn</span> <span class="o">=</span> <span class="n">itxn</span><span class="o">.</span><span class="n">ApplicationCall</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="o">.</span><span class="n">submit</span><span class="p">()</span>
    <span class="n">do_something</span><span class="p">(</span><span class="n">txn</span><span class="o">.</span><span class="n">txn_id</span><span class="p">,</span> <span class="n">txn</span><span class="o">.</span><span class="n">logs</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>  <span class="c1"># this is ok</span>
    <span class="k">return</span> <span class="n">txn</span><span class="o">.</span><span class="n">created_app</span>  <span class="c1"># and this is ok</span>


<span class="nd">@subroutine</span>
<span class="k">def</span> <span class="nf">do_something</span><span class="p">(</span><span class="n">txn_id</span><span class="p">:</span> <span class="n">Bytes</span><span class="p">):</span>  <span class="c1"># this is just a regular subroutine</span>
    <span class="o">...</span>
</pre></div>
</div>`} lang='py' frame='none' /><Fragment set:html={`
</section>
<section id="inner-transaction-parameters-cannot-be-reassigned-without-a-copy">
`} />
#### Inner transaction parameters cannot be reassigned without a .copy()

<Fragment set:html={`
`} /><Code code={`<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">algopy</span> <span class="kn">import</span> <span class="n">itxn</span><span class="p">,</span> <span class="n">subroutine</span>


<span class="nd">@subroutine</span>
<span class="k">def</span> <span class="nf">example</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">payment</span> <span class="o">=</span> <span class="n">itxn</span><span class="o">.</span><span class="n">Payment</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
    <span class="n">reassigned_payment</span> <span class="o">=</span> <span class="n">payment</span>  <span class="c1"># this is an error</span>
    <span class="n">copied_payment</span> <span class="o">=</span> <span class="n">payment</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>  <span class="c1"># this is ok</span>
</pre></div>
</div>`} lang='py' frame='none' /><Fragment set:html={`
</section>
<section id="inner-transactions-cannot-be-reassigned">
`} />
#### Inner transactions cannot be reassigned

<Fragment set:html={`
`} /><Code code={`<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">algopy</span> <span class="kn">import</span> <span class="n">itxn</span><span class="p">,</span> <span class="n">subroutine</span>


<span class="nd">@subroutine</span>
<span class="k">def</span> <span class="nf">example</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">payment_txn</span> <span class="o">=</span> <span class="n">itxn</span><span class="o">.</span><span class="n">Payment</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="o">.</span><span class="n">submit</span><span class="p">()</span>
    <span class="n">reassigned_payment_txn</span> <span class="o">=</span> <span class="n">payment_txn</span>  <span class="c1"># this is an error</span>
    <span class="n">txn_id</span> <span class="o">=</span> <span class="n">payment_txn</span><span class="o">.</span><span class="n">txn_id</span>  <span class="c1"># this is ok</span>
</pre></div>
</div>`} lang='py' frame='none' /><Fragment set:html={`
</section>
<section id="inner-transactions-methods-cannot-be-called-if-there-is-a-subsequent-inner-transaction-submitted-or-another-subroutine-is-called">
`} />
#### Inner transactions methods cannot be called if there is a subsequent inner transaction submitted or another subroutine is called.

<Fragment set:html={`
`} /><Code code={`<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">algopy</span> <span class="kn">import</span> <span class="n">itxn</span><span class="p">,</span> <span class="n">subroutine</span>


<span class="nd">@subroutine</span>
<span class="k">def</span> <span class="nf">example</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">app_1</span> <span class="o">=</span> <span class="n">itxn</span><span class="o">.</span><span class="n">ApplicationCall</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="o">.</span><span class="n">submit</span><span class="p">()</span>
    <span class="n">log_from_call1</span> <span class="o">=</span> <span class="n">app_1</span><span class="o">.</span><span class="n">logs</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># this is ok</span>

    <span class="c1"># another inner transaction is submitted</span>
    <span class="n">itxn</span><span class="o">.</span><span class="n">ApplicationCall</span><span class="p">(</span><span class="o">...</span><span class="p">)</span><span class="o">.</span><span class="n">submit</span><span class="p">()</span>
    <span class="c1"># or another subroutine is called</span>
    <span class="n">call_some_other_subroutine</span><span class="p">()</span>

    <span class="n">app1_txn_id</span> <span class="o">=</span> <span class="n">app_1</span><span class="o">.</span><span class="n">txn_id</span>  <span class="c1"># this is ok, properties are still available</span>
    <span class="n">another_log_from_call1</span> <span class="o">=</span> <span class="n">app_1</span><span class="o">.</span><span class="n">logs</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># this is not allowed as the array results may no longer be available, instead assign to a variable before submitting another transaction</span>
</pre></div>
</div>`} lang='py' frame='none' />