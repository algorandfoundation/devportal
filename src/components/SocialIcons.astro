---
import config from 'virtual:starlight/user-config';
import { Icon } from '@astrojs/starlight/components';

interface Props {
  size?: string;
  singleDisplayedSocial?: string;
}

let { size, singleDisplayedSocial } = Astro.props;

const links = config.social || [];
const isHomepage = Astro.locals.starlightRoute.id === 'index.mdx';
singleDisplayedSocial = !isHomepage ? 'github' : singleDisplayedSocial;
---

{
  links.length > 0 && (
    <>
      {links.map(({ icon, label, href }) => (
        <>
          {(singleDisplayedSocial && singleDisplayedSocial === icon) ||
          !singleDisplayedSocial ? (
            <a
              href={href}
              rel='me'
              class:list={['sl-flex', isHomepage && 'px-0! pb-4!']}
            >
              <span class='sr-only'>{label}</span>
              <Icon name={icon} size={size} />
            </a>
          ) : (
            ''
          )}
        </>
      ))}
    </>
  )
}

<style>
  a {
    color: currentColor;
    padding: 0.5em;
    margin: -0.5em;
  }
  a:hover {
    opacity: 0.66;
  }
</style>
